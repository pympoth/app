<script setup>
const city = "–í–æ–ª–≥–æ–¥–æ–Ω—Å–∫";
const { data } = await useFetch("https://wttr.in/${city}?format=j1");

console.log(data.value.current_condition);
const currentWeather = data.value.current_condition[0];

const descWeather = currentWeather.weatherDesc[0].value.trim();
console.log(descWeather);

const weatherSymbols = {
  Unknown: "‚ú®",
  Cloudy: "‚òÅÔ∏è",
  Fog: "üå´",
  "Heav rain": "üåß",
  "Heavy showers": "üåß",
  "Heavy snow": "‚ùÑÔ∏è",
  "Heavy snow showers": "‚ùÑÔ∏è",
  "Light rain": "üå¶",
  "Light showers": "üå¶",
  "Light sleet": "üåß",
  "Light sleet showers": "üåß",
  "Light snow": "üå®",
  "Light snow showers": "üå®",
  "Partly cloudy": "‚õÖÔ∏è",
  Sunny: "‚òÄÔ∏è",
  "Thundery heavy rain": "üå©",
  "Thundery showers": "‚õà",
  "Thundery snow showers": "‚õà",
  "Very cloudy": "‚òÅÔ∏è",
  Overcast: "‚òÅÔ∏è",
};
let currentSymbol = "";
if (weatherSymbols.hasOwnProperty(descWeather)) {
  currentSymbol = weatherSymbols[descWeather];
} else {
  console.log("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª");
}
</script>

<template>
  <h1>–ì–ª–∞–≤–Ω–∞—è</h1>

  <div class="widget" v-if="currentWeather">
    <h3>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {{ currentWeather.temp_C }} C</h3>
    <p class="p">–û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫: {{ currentWeather.FeelsLikeC }} C</p>
    <p class="symbol">{{ currentSymbol }}</p>
    <div class="circle"></div>
    <div class="circles"></div>
  </div>

  <div class="calendar">
    <div class="day">
      <h2 class="h5">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 6 –º–∞—è</h2>
      <div class="lesson">
        –£—á—ë–±–∞
        <p>8:00</p>
      </div>
      <div class="lesson">
        –í–µ–± –¥–∏–∑–∞–π–Ω
        <p>18:00</p>
      </div>
    </div>
    <div class="day">
      <h2 class="h2">–í—Ç–æ—Ä–Ω–∏–∫ 7 –º–∞—è</h2>
      <div class="lesson">
        –£—á–µ–±–∞
        <p>8:00</p>
      </div>
    </div>
    <div class="day">
      <h2 class="h4">–°—Ä–µ–¥–∞ 8 –º–∞—è</h2>
      <div class="lesson">
        –£—á—ë–±–∞
        <p>8:00</p>
      </div>
      <div class="lesson">
        –í–µ–± –¥–∏–∑–∞–π–Ω
        <p>18:00</p>
      </div>
    </div>
  </div>
</template>
<script scoped>
</script>
<style scoped>
.widget {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  margin: 20px;
  border: 3px solid blue;
  border-radius: 15px;
  padding: 5px;
  position: relative;
  overflow: hidden;
  background: #add2ff;
}
.symbol {
  position: absolute;
  top: -32px;
  right: 207px;
  font-size: 120pt;
  margin: -17px -17px -25px -17px;
}
.p {
  position: relative;
  top: -30px;
}
.circle {
  border: 3px solid blue;
  width: 100px;
  height: 100px;
  position: absolute;
  top: 80px;
  border-radius: 100px;
  right: -40px;
  background: #add2ff;
}
.circles {
  border: 3px solid blue;
  width: 100px;
  height: 100px;
  position: absolute;
  top: -88px;
  border-radius: 100px;
  right: -65px;
  background: #add2ff;
}
.calendar {
  margin: 20px;
  border: 3px solid blue;
  border-radius: 15px;
  padding: 5px;
  overflow: hidden;
  background: #add2ff;
}
.string {
  border: 3px solid blue;
  border-radius: 15px;
  padding: 0px;
  overflow: hidden;
  background: #add2ff;
  top: -70px;
  width: 400px;
  right: 10px;
}
.lesson {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 20px;
  font-weight: bold;
  height: 35px;
}
.string1 {
  border: 3px solid blue;
  border-radius: 15px;
  padding: 0px;
  overflow: hidden;
  background: #add2ff;
  top: -70px;
  width: 400px;
  right: 10px;
}


.day {
  border-bottom: 1px solid blue;
}
.day:last-child{
  border: none;
}
</style>